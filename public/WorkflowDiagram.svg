<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1000 740" width="100%" role="img"
     aria-label="Broker feeds ETL server running IB Gateway, which fans out to In-House GPU server, OpenAI, and Anthropic. Buy/sell decisions return from AI assets to ETL and back to Broker. ETL also powers dashboards."
     xmlns="http://www.w3.org/2000/svg">

  <!-- ====== Defs ====== -->
  <defs>
    <marker id="arrow-blue" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto-start-reverse">
      <path d="M0,0 L8,4 L0,8 Z" fill="#3b82f6"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto-start-reverse">
      <path d="M0,0 L8,4 L0,8 Z" fill="#10b981"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.35"/>
    </filter>
  </defs>

  <style>
    .panel { fill: #0f172a; stroke: #334155; }
    .title { fill: #e5e7eb; font: 700 18px/1.2 Inter, system-ui, sans-serif; }
    .muted { fill: #94a3b8; font: 12px Inter, system-ui, sans-serif; }
    .label { fill: #94a3b8; font: 12px Inter, system-ui, sans-serif; }
  </style>

  <!-- ====== Boxes ====== -->
  <!-- Broker (higher up) -->
  <g filter="url(#shadow)">
    <rect x="380" y="20" rx="12" ry="12" width="240" height="90" class="panel"/>
    <text x="500" y="62" text-anchor="middle" class="title">Broker / Exchange</text>
    <text x="500" y="84" text-anchor="middle" class="muted">Market Data • Orders</text>
  </g>

  <!-- ETL (shifted lower) -->
  <g filter="url(#shadow)">
    <rect x="350" y="180" rx="12" ry="12" width="300" height="130" class="panel"/>
    <text x="500" y="220" text-anchor="middle" class="title">ETL Server</text>
    <text x="500" y="242" text-anchor="middle" class="muted">Cleaning • Feature Eng. • Routing</text>
    <text x="500" y="264" text-anchor="middle" class="muted">Runs IB Gateway</text>
  </g>

  <!-- Dashboards (side of ETL) -->
  <g filter="url(#shadow)">
    <rect x="70" y="200" rx="12" ry="12" width="240" height="100" class="panel"/>
    <text x="190" y="235" text-anchor="middle" class="title">Dashboards</text>
    <text x="190" y="255" text-anchor="middle" class="muted">Grafana • Streamlit • Logs</text>
  </g>

  <!-- AI assets (bottom row) -->
  <g filter="url(#shadow)">
    <rect x="90"  y="480" rx="12" ry="12" width="260" height="120" class="panel"/>
    <text x="220" y="520" text-anchor="middle" class="title">In-House GPU Server</text>
    <text x="220" y="542" text-anchor="middle" class="muted">CUDA • RL • Backtesting</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="370" y="480" rx="12" ry="12" width="260" height="120" class="panel"/>
    <text x="500" y="520" text-anchor="middle" class="title">OpenAI</text>
    <text x="500" y="542" text-anchor="middle" class="muted">LLMs • Embeddings • Tools</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="650" y="480" rx="12" ry="12" width="260" height="120" class="panel"/>
    <text x="780" y="520" text-anchor="middle" class="title">Anthropic</text>
    <text x="780" y="542" text-anchor="middle" class="muted">LLMs • Reasoning • Tools</text>
  </g>

  <!-- ====== Flows ====== -->
  <!-- Broker -> ETL -->
  <line x1="500" y1="110" x2="500" y2="180" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow-blue)"/>
  <text x="510" y="150" class="label">Market data</text>

  <!-- ETL -> Dashboards -->
  <line x1="350" y1="245" x2="310" y2="250" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow-blue)"/>
  <text x="330" y="238" class="label" text-anchor="end">Metrics / Views</text>

  <!-- ETL -> AI assets -->
  <line x1="420" y1="310" x2="220" y2="480" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow-blue)"/>
  <text x="310" y="450" class="label">Features</text>

  <line x1="500" y1="310" x2="500" y2="480" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow-blue)"/>
  <text x="510" y="450" class="label">Prompts / Data</text>

  <line x1="580" y1="310" x2="780" y2="480" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow-blue)"/>
  <text x="690" y="450" class="label">Contexts</text>

  <!-- AI assets -> ETL -->
  <line x1="220" y1="480" x2="420" y2="310" stroke="#10b981" stroke-width="3" marker-end="url(#arrow-green)"/>
  <text x="310" y="370" class="label" fill="#34d399">Signals / Decisions</text>

  <line x1="500" y1="480" x2="500" y2="310" stroke="#10b981" stroke-width="3" marker-end="url(#arrow-green)"/>
  <text x="510" y="370" class="label" fill="#34d399">Buy / Sell</text>

  <line x1="780" y1="480" x2="580" y2="310" stroke="#10b981" stroke-width="3" marker-end="url(#arrow-green)"/>
  <text x="690" y="370" class="label" fill="#34d399">Recommendations</text>

  <!-- ETL -> Broker (orders up) -->
  <line x1="500" y1="180" x2="500" y2="110" stroke="#10b981" stroke-width="3" marker-end="url(#arrow-green)"/>
  <text x="510" y="138" class="label" fill="#34d399">Orders</text>
</svg>

















