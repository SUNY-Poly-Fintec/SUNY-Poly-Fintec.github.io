---
import Layout from "../components/Layout.astro";
import { getCollection } from 'astro:content';
const events = (await getCollection('events')).sort((a,b)=> a.data.date.localeCompare(b.data.date));
const today = new Date().toISOString().slice(0,10);
const upcoming = events.filter(e => e.data.date >= today);
---
<Layout title="Events">
<h1>Upcoming Events</h1>
{upcoming.length === 0 ? (
<p class="card">No upcoming events yet. Check back soon!</p>
) : (
<ul style="list-style:none; padding:0; display:grid; gap:1rem;">
{upcoming.map(({ id, data, body }) => (
<li class="card" style="display:grid; gap:.25rem" id={id}>
<h3 style="margin:0">{data.title}</h3>
<div style="color:#9ca3af">{data.date}{data.location ? ` â€¢ ${data.location}` : ''}</div>
{data.link && <a href={data.link}>Details / RSVP</a>}
{body && <p>{body}</p>}
</li>
))}
</ul>
)}
</Layout>
